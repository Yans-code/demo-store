


<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- 人脸与Image Tracking引入的库有不同 -->
    <!-- <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/dist/mindar-face.prod.js"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/dist/mindar-face-aframe.prod.js"></script> -->




    <script src="https://yans-code.github.io/demo-store/ar/assets/js/aframe.min.js"></script>
    <script src="https://yans-code.github.io/demo-store/ar/assets/js/aframe-gif-shader.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-gif-component/master/dist/aframe-gif-component.min.js"></script>
  </head>
  
  
  
    <!-- <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script> -->
    <script src="https://yans-code.github.io/demo-store/ar/assets/js/mindar-image-aframe.prod.js"></script>
    <script>

      let visible = false

      function playPauseVideo(id) {
        const myVideo = document.querySelector(`#${id}`);
        if (myVideo.paused) {
          myVideo.play();
        } else {
          myVideo.pause();
        }
      }


      
      document.addEventListener('DOMContentLoaded', function () {
        const sceneEl = document.querySelector('a-scene')
        let arSystem
        sceneEl.addEventListener('loaded', function () {
          arSystem = sceneEl.systems['mindar-image-system']
        })
        const exampleTarget = document.querySelector('#example-target')
        const examplePlane = document.querySelector('#example-plane')
        const startButton = document.querySelector('#example-start-button')
        const stopButton = document.querySelector('#example-stop-button')
        const pauseButton = document.querySelector('#example-pause-button')
        const pauseKeepVideoButton = document.querySelector(
          '#example-pause-keep-video-button'
        )
        const unpauseButton = document.querySelector('#example-unpause-button')
        startButton.addEventListener('click', () => {
          console.log('start')
          arSystem.start() // start AR
        })
        stopButton.addEventListener('click', () => {
          arSystem.stop() // stop AR
        })
        pauseButton.addEventListener('click', () => {
          arSystem.pause() // pause AR, pause video
        })
        pauseKeepVideoButton.addEventListener('click', () => {
          arSystem.pause(true) // pause AR, keep video
        })
        unpauseButton.addEventListener('click', () => {
          arSystem.unpause() // unpause AR and video
        })
        // arReady event triggered when ready
        sceneEl.addEventListener('arReady', (event) => {
          // console.log("MindAR is ready")
        })
        // arError event triggered when something went wrong. Mostly browser compatbility issue
        sceneEl.addEventListener('arError', (event) => {
          // console.log("MindAR failed to start")
        })
        // detect target found
        exampleTarget?.addEventListener('targetFound', (event) => {
          console.log('target found', event.target)
          // el.object3D.scale.set(1, 2, 3)
          
          // playPauseVideo('example-target')
        })
        // detect target lost
        exampleTarget?.addEventListener('targetLost', (event) => {
          console.log('target lost')
        })
        // detect click event
        // examplePlane.addEventListener('click', (event) => {
        //   console.log('plane click', event)
        // })
      })
    </script>
  </head>
  <body>
    <div style="position: absolute; z-index: 1000">
      <button id="example-start-button">Start</button>
      <button id="example-pause-button">Pause</button>
      <button id="example-pause-keep-video-button">Pause (keep video)</button>
      <button id="example-unpause-button">UnPause</button>
      <button id="example-stop-button">Stop</button>
    </div>
    
    <a-scene
      mindar-image="imageTargetSrc: https://yans-code.github.io/demo-store/ar/assets/map.mind; autoStart: true;filterMinCF:.001; filterBeta: 1"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
      id="map"
    >
    <a-assets>
      <a-asset-item
        id="tree-obj"
        src="https://yans-code.github.io/demo-store/ar/assets/obj/indoor_plant/indoor_plant_02_obj/indoor_plant_02.obj"
      ></a-asset-item>
      <a-asset-item
        id="tree-mtl"
        src="https://yans-code.github.io/demo-store/ar/assets/obj/indoor_plant/indoor_plant_02_obj/indoor_plant_02.mtl"
      ></a-asset-item>
      <a-asset-item
        id="mp4"
        src="https://yans-code.github.io/demo-store/ar/assets/video/2023_02_22_test_resource_v.mp4"
        
      ></a-asset-item>
      <a-asset-item
        id="gif"
        src="https://yans-code.github.io/demo-store/ar/assets/images/giftest.gif"
      ></a-asset-item>
      
      <img id="my-image" src="https://yans-code.github.io/demo-store/ar/assets/images/tools.png">
      <a-asset-item
        id="glft"
        src="https://yans-code.github.io/demo-store/ar/assets/glft/cute_dragon/scene.gltf"
        
      ></a-asset-item>
    </a-assets>
      <a-camera
        position="0 0 0"
        look-controls="enabled: true"
        cursor="fuse: false; rayOrigin: mouse;"
        raycaster="near: 10; far: 10000; objects: .clickable"
      ></a-camera>
      
      
      <a-entity
        id="example-target"
        mindar-image-target="targetIndex: 0"
        animation="property: rotation; to: 0 0 0; loop: true; dur: 10000"
        rotation="0 0 0" 
      >
        
        <!-- <a-image 
          src="#my-image"
          position="-1 0 -10"
        /> -->
        <a-entity geometry="primitive:plane;width:2;height:2;" position="-1 0 -10" material="shader:gif; src:#gif; color:orange;"></a-entity>
        <!-- <a-plane width="4" height="4" color="#fff"></a-plane> -->
        <a-gltf-model
          scale="1 1 1"
          src="#glft"
          rotation="0 0 0" 

          animation="property: rotation; to: 0 360 0; loop: true; dur: 10000"
          position="-1 0 -10">
        </a-gltf-model>
      </a-entity>
      <div style="position: absolute; bottom: 10px; right: 20px">asdasdas</div>
    </a-scene>
  </body>
</html>

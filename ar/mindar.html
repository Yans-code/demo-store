


<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://yans-code.github.io/demo-store/ar/assets/js/aframe.min.js"></script>
    <!-- <script src="https://yans-code.github.io/demo-store/ar/assets/js/aframe-gif-shader.min.js"></script> -->
    <script src="https://yans-code.github.io/demo-store/ar/assets/js/aframe-ar-nft.js"></script>

    <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
    <!-- <script src="https://yans-code.github.io/demo-store/ar/assets/js/mindar-image-aframe.prod.js"></script> -->
    <script>

      let visible = false

      function playPauseVideo(id) {
        const myVideo = document.querySelector(`#${id}`);
        if (myVideo.paused) {
          myVideo.play();
        } else {
          myVideo.pause();
        }
      }


      
      // document.addEventListener('DOMContentLoaded', function () {
      //   const sceneEl = document.querySelector('a-scene')
      //   let arSystem
      //   sceneEl.addEventListener('loaded', function () {
      //     arSystem = sceneEl.systems['mindar-image-system']
      //   })
      //   const exampleTarget = document.querySelector('#example-target')
      //   const examplePlane = document.querySelector('#example-plane')
      //   const startButton = document.querySelector('#example-start-button')
      //   const stopButton = document.querySelector('#example-stop-button')
      //   const pauseButton = document.querySelector('#example-pause-button')
      //   const pauseKeepVideoButton = document.querySelector(
      //     '#example-pause-keep-video-button'
      //   )
      //   const unpauseButton = document.querySelector('#example-unpause-button')
      //   startButton.addEventListener('click', () => {
      //     console.log('start')
      //     arSystem.start() // start AR
      //   })
      //   stopButton.addEventListener('click', () => {
      //     arSystem.stop() // stop AR
      //   })
      //   pauseButton.addEventListener('click', () => {
      //     arSystem.pause() // pause AR, pause video
      //   })
      //   pauseKeepVideoButton.addEventListener('click', () => {
      //     arSystem.pause(true) // pause AR, keep video
      //   })
      //   unpauseButton.addEventListener('click', () => {
      //     arSystem.unpause() // unpause AR and video
      //   })
      //   // arReady event triggered when ready
      //   sceneEl.addEventListener('arReady', (event) => {
      //     // console.log("MindAR is ready")
      //   })
      //   // arError event triggered when something went wrong. Mostly browser compatbility issue
      //   sceneEl.addEventListener('arError', (event) => {
      //     // console.log("MindAR failed to start")
      //   })
      //   // detect target found
      //   exampleTarget?.addEventListener('targetFound', (event) => {
      //     // console.log('target found', event.target.object3D.scale.set(0.1, 0.1, 0.1))
      //     // el.object3D.scale.set(1, 2, 3)
          
      //     // playPauseVideo('example-target')
      //   })
      //   // detect target lost
      //   exampleTarget?.addEventListener('targetLost', (event) => {
      //     console.log('target lost')
      //   })
      //   // detect click event
      //   // examplePlane.addEventListener('click', (event) => {
      //   //   console.log('plane click', event)
      //   // })
      // })
    </script>
  </head>
  <body>
    <div style="position: absolute; z-index: 1000">
      <button id="example-start-button">Start</button>
      <button id="example-pause-button">Pause</button>
      <button id="example-pause-keep-video-button">Pause (keep video)</button>
      <button id="example-unpause-button">UnPause</button>
      <button id="example-stop-button">Stop</button>
    </div>
    
    <!-- <a-scene
      mindar-image="imageTargetSrc: https://yans-code.github.io/demo-store/ar/assets/map.mind; autoStart: true;"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
      id="map"
    >
      <a-assets>
        <a-asset-item
          id="tree-obj"
          src="https://yans-code.github.io/demo-store/ar/assets/obj/indoor_plant/indoor_plant_02_obj/indoor_plant_02.obj"
        ></a-asset-item>
        <a-asset-item
          id="tree-mtl"
          src="https://yans-code.github.io/demo-store/ar/assets/obj/indoor_plant/indoor_plant_02_obj/indoor_plant_02.mtl"
        ></a-asset-item>
        <a-asset-item
          id="mp4"
          src="https://yans-code.github.io/demo-store/ar/assets/video/2023_02_22_test_resource_v.mp4"
          
        ></a-asset-item>
        <a-asset-item
          id="gif"
          src="https://yans-code.github.io/demo-store/ar/assets/images/giftest.gif"
        ></a-asset-item>
      </a-assets>
      <a-camera
        position="0 0 0"
        look-controls="enabled: true"
        cursor="fuse: false; rayOrigin: mouse;"
        raycaster="near: 10; far: 10000; objects: .clickable"
      ></a-camera>

      <a-entity mindar-image-target="targetIndex: 0" geometry="primitive:plane; width:10; height:10" gif-shader="src: https://yans-code.github.io/demo-store/ar/assets/images/giftest.gif; repeat:2,2; play:true"></a-entity>
      <a-entity
        id="example-target"
        mindar-image-target="targetIndex: 0"
        obj-model="obj: #tree-obj; mtl: #tree-mtl"
        scale="100 100 100"
        position="-10 -10 -10"
        rotation="180 180 180"
      >
      </a-entity>
      <a-entity
        id="example-target"
        mindar-image-target="targetIndex: 0"  animation="property: rotation; to: 0 180 360; loop: true; dur: 700"
        position="10 10 10"
        rotation="0 180 0"
        scale="1 1 1">
        <a-video src="https://yans-code.github.io/demo-store/ar/assets/video/2023_02_22_test_resource_v.mp4" width="6" height="4" position="5 5 -20"></a-video>
      </a-entity>
    </a-scene> -->
    <a-scene
      vr-mode-ui="enabled: false;"
      renderer="logarithmicDepthBuffer: true;"
      embedded
      arjs="trackingMethod: best; sourceType: webcam;debugUIEnabled: false;"
    >
      <a-assets>
        <a-asset-item
          id="tree-obj"
          src="https://yans-code.github.io/demo-store/ar/assets/obj/indoor_plant/indoor_plant_02_obj/indoor_plant_02.obj"
        ></a-asset-item>
        <a-asset-item
          id="tree-mtl"
          src="https://yans-code.github.io/demo-store/ar/assets/obj/indoor_plant/indoor_plant_02_obj/indoor_plant_02.mtl"
        ></a-asset-item>
      </a-assets>
      <!-- 这里是图像标记的配置，下面的url就是图像标记文件的地址，在官方示例中这里使用了cors代理避免跨域问题，作者在这里并没有进行更改 -->
      <a-nft
        type="nft"
        url="https://yans-code.github.io/demo-store/ar/assets/images/map/map"
        smooth="true"
        smoothCount="10"
        smoothTolerance=".01"
        smoothThreshold="5"
      >
        <!-- 这里是一个模型实体，gltf-model是模型的地址，在官方示例中这里同样使用了cors代理避免跨域问题，作者在这里并没有进行更改 -->
        <a-entity
          id="example-target"
          obj-model="obj: #tree-obj; mtl: #tree-mtl"
          scale="1 1 1"
          position="0 0 0"
          rotation="0 0 0"
        >
      </a-nft>
      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
